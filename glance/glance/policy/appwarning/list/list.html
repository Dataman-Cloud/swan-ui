<md-toolbar class="md-table-toolbar md-default">
    <div class="md-toolbar-tools">
        <form flex name="filter.form">
            <input type="text" ng-model="warningListCtrl.searchKeyWord" placeholder="输入应用名称进行搜索"
                   my-enter="warningListCtrl.table.doSearch(warningListCtrl.searchKeyWord)">
        </form>
    </div>
</md-toolbar>
<md-table-container>
    <table md-table>
        <thead md-head md-order="warningListCtrl.table.query.order"
               md-on-reorder="warningListCtrl.table.getOrder">
        <tr md-row>
            <th md-column md-order-by="id"><span>ID</span></th>
            <th md-column md-order-by="appname"><span>应用名称</span></th>
            <th md-column>规则</th>
            <th md-column>周期</th>
            <th md-column>阈值</th>
            <th md-column md-order-by="emails">联系人</th>
            <th md-column>启用</th>
            <th md-column md-order-by="updated">更新时间</th>
            <th md-column>操作</th>
        </tr>
        </thead>
        <tbody md-body>
        <tr md-row ng-repeat="item in warningListCtrl.warningList">
            <td md-cell>{/item.id/}</td>
            <td md-cell><a href="#">{/item.appname/}</a></td>
            <td md-cell>
                {/warningListCtrl.WARNING_TYPE[item.metric]/} / {/warningListCtrl.WARNING_RULE[item.operator]/}/
                <span data-ng-if="item.metric === 'CpuUsedCores'">{/item.threshold * 100 /}</span>
                <span data-ng-hide="item.metric === 'CpuUsedCores'">{/item.threshold/}</span>

                <span data-ng-if="item.metric === 'MemoryUsed'">MB</span>
                <span data-ng-if="item.metric === 'CpuUsedCores'">%</span>
                <span data-ng-if="item.metric === 'DiskIOReadBytesRate' || item.metric === 'DiskIOWriteBytesRate' ||
                item.metric === 'NetworkReceviedByteRate' || item.metric === 'NetworkSentByteRate'">B/s</span>
            </td>
            <td md-cell>{/item.duration/} 分钟</td>
            <td md-cell>{/item.times/} 次</td>
            <td md-cell>{/item.emails/}</td>
            <td md-cell>{/warningListCtrl.enableText[item.enabled]/}</td>
            <td md-cell>{/item.updated | date:"yyyy-MM-dd HH:mm" : "UTC"/}</td>
            <td md-cell>
                <md-menu md-offset="0 -5">
                    <md-button aria-label="Open demo menu" class="md-button md-raised" ng-click="$mdOpenMenu($event)"><i
                            class="fa fa-ellipsis-h" aria-hidden="true"></i></md-button>
                    <md-menu-content width="2">
                        <md-menu-item ng-if="!item.enabled" data-ng-click="warningListCtrl.switchNotice(item)">
                            <md-button>启动</md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="item.enabled" data-ng-click="warningListCtrl.switchNotice(item)">
                            <md-button>停止</md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button data-ng-click="warningListCtrl.deleteTask(item.id, $event)">删除</md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button data-ui-sref="policy.WarningUpdate({task_id: item.id})">更新</md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
            </td>
        </tr>
        </tbody>
    </table>
</md-table-container>
<md-table-pagination md-label="{page: '页:', rowsPerPage: '每页:', of: 'of'}"
                     md-limit="warningListCtrl.table.query.limit" md-limit-options="[20, 50, 100]"
                     md-page="warningListCtrl.table.query.page"
                     md-total="{/warningListCtrl.count/}" md-on-paginate="warningListCtrl.table.getPage" md-page-select>
</md-table-pagination>
