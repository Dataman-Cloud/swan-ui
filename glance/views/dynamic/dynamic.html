<section class="dashboard">
    <div class="main-container" ng-repeat="(clusterId, cluster) in clusterList track by clusterId">
        <div class="main-container-body clearfix">
            <h2>
                <a href="#" data-ui-sref="cluster.clusterdetails.nodes({clusterId:clusterId})">{/cluster.name/}</a>
            </h2>
            <div class="dashboard-left">
                <div class="dashboard-cluster">
                    <div class="disable-cover" 
                        data-ng-if="!(statusMgr.nodeStatusCount[clusterId].running + 
                            statusMgr.nodeStatusCount[clusterId].failed + 
                            statusMgr.nodeStatusCount[clusterId].installing + 
                            statusMgr.nodeStatusCount[clusterId].upgrading)">
                    </div>
                    <div>
                        <piechart chart-used="cluster.masMetrics.cpuPercent" chart-total="100" radius="[50, 65]"
                              use-color="#68d1f2" show-text="CPU占用" text-color="#68d1f2" error-code="errorCode">
                        </piechart>
                        <div class="cluster-piechart-num" ng-show="cluster.masMetrics.cpuTotal"><em>{/cluster.masMetrics.cpuShare.toFixed(2)/}</em> / {/cluster.masMetrics.cpuTotal/}</div>
                    </div>
                    <div>
                        <piechart chart-used="cluster.masMetrics.memUsed" chart-total="cluster.masMetrics.memTotal" radius="[50, 65]"
                              use-color="#ff9494" show-text="内存占用" text-color="#ff9494" error-code="errorCode">
                        </piechart>
                        <div class="cluster-piechart-num" ng-show="cluster.masMetrics.memTotal"><em>{/cluster.masMetrics.memUsed/}</em> / {/cluster.masMetrics.memTotal | currency: '' :0/} MB</div>
                    </div>
                </div>



                <div>
                    <ul class="cluster-service-status-number">
                        <li class="running">
                          <a>正常主机 <span>{/statusMgr.nodeStatusCount[clusterId].running || 0/}</span></a>
                        </li>
                        <li class="terminated">
                          <a>失联主机 <span>{/statusMgr.nodeStatusCount[clusterId].terminated || 0/}</span></a>
                        </li>
                        <li class="installing">
                          <a>维护中主机 <span>{/(statusMgr.nodeStatusCount[clusterId].installing+statusMgr.nodeStatusCount[clusterId].upgrading+statusMgr.nodeStatusCount[clusterId].initing+statusMgr.nodeStatusCount[clusterId].repairing) || 0/}</span></a>
                        </li>
                        <li class="failed">
                          <a>异常主机 <span>{/statusMgr.nodeStatusCount[clusterId].failed || 0/}</span>&nbsp;&nbsp;
                             报警主机 <span>{/statusMgr.nodeStatusCount[clusterId].abnormal || 0/}</span>
                          </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="dashboard-right">

                <div class="dashboard-app">
                    <div class="disable-cover" 
                        data-ng-if="!(statusMgr.nodeStatusCount[clusterId].running + 
                            statusMgr.nodeStatusCount[clusterId].failed + 
                            statusMgr.nodeStatusCount[clusterId].installing + 
                            statusMgr.nodeStatusCount[clusterId].upgrading)">
                    </div>
                   <div ng-repeat="appMon in cluster.appMonitors" class="app-info">
                        <h5>{/appMon.appName/}</h5>
                        <piechart chart-used="appMon.appCpuUsed" chart-total="appMon.appCpuShare" radius="[45, 55]"
                                    use-color="#68d1f2" show-text="CPU使用" text-color="#68d1f2" error-code="errorCode"
                                  status="appMon.status">
                        </piechart>
                        <piechart chart-used="appMon.appMemUsed" chart-total="appMon.appMemShare" radius="[45, 55]"
                                    use-color="#ff9494" show-text="内存使用" text-color="#ff9494" error-code="errorCode"
                                  status="appMon.status">
                        </piechart>
                   </div>
                </div>
            </div>
        </div>
    </div>
</section>